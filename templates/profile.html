{% extends "base.html" %}

{% block title %}Create Your Profile - University Matcher{% endblock %}

{% block hero %}
<section class="hero">
    <div class="container">
        <h1 data-aos="fade-up">Create Your Profile</h1>
        <p data-aos="fade-up" data-aos-delay="100">Tell us about yourself so we can find your perfect university matches.</p>
    </div>
</section>
{% endblock %}

{% block content %}
<div class="container" data-aos="fade-up" data-aos-delay="200">
    <div class="card profile-card">
        <div class="profile-progress-bar">
            <div class="progress-indicator" id="progress-indicator"></div>
        </div>
        
        <div class="card-body">
            {% if error %}
            <div class="alert alert-error">
                {{ error }}
            </div>
            {% endif %}
            
            <form action="{{ url_for('profile') }}" method="post" data-validate id="profile-form">
                <div class="form-section" id="section-1">
                    <div class="section-header">
                        <div class="section-icon"><i class="fas fa-graduation-cap"></i></div>
                        <h3>Academic Information</h3>
                    </div>
                    
                    <div class="form-group">
                        <label for="gpa">GPA (on a 4.0 scale)</label>
                        <input type="number" id="gpa" name="gpa" step="0.01" min="0" max="4.0" required>
                        <div class="form-feedback" id="gpa-feedback"></div>
                        <div class="gpa-visualization">
                            <div class="gpa-bar" id="gpa-bar"></div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="sat_score">SAT Score (out of 1600)</label>
                        <input type="number" id="sat_score" name="sat_score" min="400" max="1600" required>
                        <div class="form-feedback" id="sat-feedback"></div>
                        <div class="sat-visualization">
                            <div class="sat-marker" id="sat-marker"></div>
                            <div class="sat-scale">
                                <span>400</span>
                                <span>800</span>
                                <span>1200</span>
                                <span>1600</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="majors">Majors of Interest</label>
                        <div class="input-with-suggestions">
                            <input type="text" id="majors-input" placeholder="Type a major and press Enter">
                            <input type="hidden" id="majors" name="majors" required>
                            <div id="major-suggestions" class="suggestions-dropdown"></div>
                        </div>
                        <div id="majors-tags" class="tags-container"></div>
                    </div>
                    
                    <div class="form-actions section-nav">
                        <button type="button" class="btn btn-primary next-btn" data-next="2">Continue <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
                
                <div class="form-section hidden" id="section-2">
                    <div class="section-header">
                        <div class="section-icon"><i class="fas fa-dollar-sign"></i></div>
                        <h3>Financial Information</h3>
                    </div>
                    
                    <div class="form-group">
                        <label for="budget">Annual Budget for Tuition (USD)</label>
                        <input type="number" id="budget" name="budget" min="1000" required>
                        <div class="budget-indicator">
                            <div id="budget-level"></div>
                        </div>
                        <div class="budget-labels">
                            <span>$1,000</span>
                            <span>$25,000</span>
                            <span>$50,000+</span>
                        </div>
                        <div class="budget-feedback" id="budget-feedback"></div>
                    </div>
                    
                    <div class="form-actions section-nav">
                        <button type="button" class="btn btn-outline back-btn" data-prev="1"><i class="fas fa-arrow-left"></i> Back</button>
                        <button type="button" class="btn btn-primary next-btn" data-next="3">Continue <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
                
                <div class="form-section hidden" id="section-3">
                    <div class="section-header">
                        <div class="section-icon"><i class="fas fa-map-marker-alt"></i></div>
                        <h3>Location Preferences</h3>
                    </div>
                    
                    <div class="form-group">
                        <label for="locations">Preferred Locations</label>
                        <div class="input-with-suggestions">
                            <input type="text" id="locations-input" placeholder="Type a location and press Enter">
                            <input type="hidden" id="locations" name="locations">
                            <div id="location-suggestions" class="suggestions-dropdown"></div>
                        </div>
                        <div id="locations-tags" class="tags-container"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="environment">Preferred Environment</label>
                        <div class="environment-selector">
                            <div class="environment-option" data-value="Urban">
                                <div class="env-icon"><i class="fas fa-city"></i></div>
                                <span>Urban</span>
                            </div>
                            <div class="environment-option" data-value="Suburban">
                                <div class="env-icon"><i class="fas fa-home"></i></div>
                                <span>Suburban</span>
                            </div>
                            <div class="environment-option" data-value="Rural">
                                <div class="env-icon"><i class="fas fa-tree"></i></div>
                                <span>Rural</span>
                            </div>
                            <div class="environment-option" data-value="College town">
                                <div class="env-icon"><i class="fas fa-university"></i></div>
                                <span>College town</span>
                            </div>
                        </div>
                        <input type="hidden" id="environment" name="environment" required>
                    </div>
                    
                    <div class="form-actions section-nav">
                        <button type="button" class="btn btn-outline back-btn" data-prev="2"><i class="fas fa-arrow-left"></i> Back</button>
                        <button type="button" class="btn btn-primary next-btn" data-next="4">Continue <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
                
                <div class="form-section hidden" id="section-4">
                    <div class="section-header">
                        <div class="section-icon"><i class="fas fa-balance-scale"></i></div>
                        <h3>Importance Weights</h3>
                    </div>
                    <p>Rate the importance of each factor in your decision</p>
                    
                    <div class="form-group weight-slider">
                        <label for="academic_weight">Academic Reputation <output for="academic_weight" class="weight-value">5</output></label>
                        <input type="range" id="academic_weight" name="academic_weight" min="1" max="10" value="5" class="importance-slider">
                        <div class="slider-labels">
                            <span>Less Important</span>
                            <span>Very Important</span>
                        </div>
                    </div>
                    
                    <div class="form-group weight-slider">
                        <label for="financial_weight">Affordability <output for="financial_weight" class="weight-value">5</output></label>
                        <input type="range" id="financial_weight" name="financial_weight" min="1" max="10" value="5" class="importance-slider">
                        <div class="slider-labels">
                            <span>Less Important</span>
                            <span>Very Important</span>
                        </div>
                    </div>
                    
                    <div class="form-group weight-slider">
                        <label for="location_weight">Location <output for="location_weight" class="weight-value">5</output></label>
                        <input type="range" id="location_weight" name="location_weight" min="1" max="10" value="5" class="importance-slider">
                        <div class="slider-labels">
                            <span>Less Important</span>
                            <span>Very Important</span>
                        </div>
                    </div>
                    
                    <div class="form-group weight-slider">
                        <label for="career_weight">Career Prospects <output for="career_weight" class="weight-value">5</output></label>
                        <input type="range" id="career_weight" name="career_weight" min="1" max="10" value="5" class="importance-slider">
                        <div class="slider-labels">
                            <span>Less Important</span>
                            <span>Very Important</span>
                        </div>
                    </div>
                    
                    <div class="form-group weight-slider">
                        <label for="campus_weight">Campus Culture <output for="campus_weight" class="weight-value">5</output></label>
                        <input type="range" id="campus_weight" name="campus_weight" min="1" max="10" value="5" class="importance-slider">
                        <div class="slider-labels">
                            <span>Less Important</span>
                            <span>Very Important</span>
                        </div>
                    </div>
                    
                    <div class="form-actions section-nav">
                        <button type="button" class="btn btn-outline back-btn" data-prev="3"><i class="fas fa-arrow-left"></i> Back</button>
                        <button type="submit" class="btn btn-lg btn-primary">
                            <i class="fas fa-search"></i> Find My Matches
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Multi-step form navigation
        const sections = document.querySelectorAll('.form-section');
        const progressIndicator = document.getElementById('progress-indicator');
        
        const showSection = (sectionNum) => {
            sections.forEach((section, index) => {
                section.classList.toggle('hidden', index+1 !== sectionNum);
                section.classList.toggle('active', index+1 === sectionNum);
            });
            
            // Update progress bar
            const progress = ((sectionNum - 1) / (sections.length - 1)) * 100;
            progressIndicator.style.width = `${progress}%`;
            
            // Scroll to top of form
            document.querySelector('.profile-card').scrollIntoView({ behavior: 'smooth' });
        };
        
        // Set up next/back buttons
        document.querySelectorAll('.next-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const nextSection = parseInt(this.getAttribute('data-next'));
                showSection(nextSection);
            });
        });
        
        document.querySelectorAll('.back-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const prevSection = parseInt(this.getAttribute('data-prev'));
                showSection(prevSection);
            });
        });
        
        // Enhanced slider visual feedback
        const importanceSliders = document.querySelectorAll('.importance-slider');
        importanceSliders.forEach(slider => {
            const output = slider.parentElement.querySelector('.weight-value');
            
            // Update color based on value
            const updateSliderColor = (value) => {
                const percent = (value - 1) / 9 * 100;
                slider.style.background = `linear-gradient(to right, #4a89dc ${percent}%, #e6e6e6 ${percent}%)`;
                output.textContent = value;
            };
            
            // Set initial color
            updateSliderColor(slider.value);
            
            // Update when slider changes
            slider.addEventListener('input', function() {
                updateSliderColor(slider.value);
            });
        });
        
        // GPA feedback and visualization
        const gpaInput = document.getElementById('gpa');
        const gpaFeedback = document.getElementById('gpa-feedback');
        const gpaBar = document.getElementById('gpa-bar');
        
        gpaInput.addEventListener('input', function() {
            const gpa = parseFloat(this.value);
            if (!isNaN(gpa) && gpa >= 0 && gpa <= 4.0) {
                // Update GPA bar
                const percent = (gpa / 4.0) * 100;
                gpaBar.style.width = `${percent}%`;
                
                // Color based on GPA
                if (gpa >= 3.7) {
                    gpaBar.style.backgroundColor = '#2ecc71';
                    gpaFeedback.textContent = 'Excellent! Top schools likely in reach.';
                    gpaFeedback.className = 'form-feedback good';
                } else if (gpa >= 3.0) {
                    gpaBar.style.backgroundColor = '#3498db';
                    gpaFeedback.textContent = 'Good! Many quality schools available.';
                    gpaFeedback.className = 'form-feedback medium';
                } else if (gpa >= 2.0) {
                    gpaBar.style.backgroundColor = '#f39c12';
                    gpaFeedback.textContent = 'Consider schools with flexible admissions.';
                    gpaFeedback.className = 'form-feedback warning';
                } else {
                    gpaBar.style.backgroundColor = '#e74c3c';
                    gpaFeedback.textContent = 'Limited options. Consider community colleges.';
                    gpaFeedback.className = 'form-feedback warning';
                }
            } else {
                gpaBar.style.width = '0%';
                gpaFeedback.textContent = '';
                gpaFeedback.className = 'form-feedback';
            }
        });
        
        // SAT feedback and visualization
        const satInput = document.getElementById('sat_score');
        const satFeedback = document.getElementById('sat-feedback');
        const satMarker = document.getElementById('sat-marker');
        
        satInput.addEventListener('input', function() {
            const sat = parseInt(this.value);
            if (!isNaN(sat) && sat >= 400 && sat <= 1600) {
                // Update SAT marker position
                const percent = ((sat - 400) / 1200) * 100;
                satMarker.style.left = `${percent}%`;
                
                // Feedback based on SAT score
                if (sat >= 1400) {
                    satMarker.style.backgroundColor = '#2ecc71';
                    satFeedback.textContent = 'Excellent! Top-tier university potential.';
                    satFeedback.className = 'form-feedback good';
                } else if (sat >= 1200) {
                    satMarker.style.backgroundColor = '#3498db';
                    satFeedback.textContent = 'Very good! Many options available.';
                    satFeedback.className = 'form-feedback medium';
                } else if (sat >= 1000) {
                    satMarker.style.backgroundColor = '#f39c12';
                    satFeedback.textContent = 'Consider mid-range universities.';
                    satFeedback.className = 'form-feedback warning';
                } else {
                    satMarker.style.backgroundColor = '#e74c3c';
                    satFeedback.textContent = 'Consider schools with flexible admissions.';
                    satFeedback.className = 'form-feedback warning';
                }
            } else {
                satMarker.style.left = '0%';
                satFeedback.textContent = '';
                satFeedback.className = 'form-feedback';
            }
        });
        
        // Budget visualization and feedback
        const budgetInput = document.getElementById('budget');
        const budgetLevel = document.getElementById('budget-level');
        const budgetFeedback = document.getElementById('budget-feedback');
        
        budgetInput.addEventListener('input', function() {
            const budget = parseInt(this.value);
            if (!isNaN(budget) && budget > 0) {
                let percentage;
                if (budget >= 50000) {
                    percentage = 100;
                    budgetFeedback.textContent = 'Elite private universities are within your budget';
                    budgetFeedback.className = 'form-feedback good';
                } else if (budget >= 30000) {
                    percentage = 60 + (budget - 30000) / 20000 * 40;
                    budgetFeedback.textContent = 'Many private universities are within your budget';
                    budgetFeedback.className = 'form-feedback good';
                } else if (budget >= 15000) {
                    percentage = 30 + (budget - 15000) / 15000 * 30;
                    budgetFeedback.textContent = 'Consider state universities or scholarships';
                    budgetFeedback.className = 'form-feedback medium';
                } else {
                    percentage = budget / 15000 * 30;
                    budgetFeedback.textContent = 'Look into community colleges or significant financial aid';
                    budgetFeedback.className = 'form-feedback warning';
                }
                
                budgetLevel.style.width = `${percentage}%`;
                
                if (percentage <= 30) {
                    budgetLevel.style.backgroundColor = '#e74c3c';
                } else if (percentage <= 70) {
                    budgetLevel.style.backgroundColor = '#f39c12';
                } else {
                    budgetLevel.style.backgroundColor = '#2ecc71';
                }
            } else {
                budgetLevel.style.width = '0%';
                budgetFeedback.textContent = '';
            }
        });
        
        // Major tags with autocomplete
        const majorsInput = document.getElementById('majors-input');
        const majorsHidden = document.getElementById('majors');
        const majorsContainer = document.getElementById('majors-tags');
        const majorSuggestions = document.getElementById('major-suggestions');
        
        // Common majors for suggestions
        const commonMajors = [
            'Computer Science', 'Business Administration', 'Engineering', 'Psychology',
            'Biology', 'Communications', 'Political Science', 'Economics', 'English',
            'Chemistry', 'Mathematics', 'History', 'Sociology', 'Art', 'Education',
            'Physics', 'Marketing', 'Criminal Justice', 'Accounting', 'Philosophy',
            'Nursing', 'Architecture', 'Medicine', 'Music', 'Environmental Science'
        ];
        
        let selectedMajors = [];
        
        const updateMajorTags = () => {
            majorsContainer.innerHTML = '';
            selectedMajors.forEach((major, index) => {
                const tag = document.createElement('span');
                tag.className = 'tag';
                tag.innerHTML = `${major} <span class="tag-remove" data-index="${index}">×</span>`;
                majorsContainer.appendChild(tag);
            });
            
            // Update hidden input
            majorsHidden.value = selectedMajors.join(',');
        };
        
        // Show suggestions on focus
        majorsInput.addEventListener('focus', function() {
            // Filter out already selected majors
            const availableMajors = commonMajors.filter(m => !selectedMajors.includes(m));
            if (availableMajors.length > 0) {
                majorSuggestions.innerHTML = '';
                availableMajors.forEach(major => {
                    const item = document.createElement('div');
                    item.className = 'suggestion-item';
                    item.textContent = major;
                    item.addEventListener('click', function() {
                        if (!selectedMajors.includes(major)) {
                            selectedMajors.push(major);
                            updateMajorTags();
                            majorsInput.value = '';
                            majorSuggestions.innerHTML = '';
                        }
                    });
                    majorSuggestions.appendChild(item);
                });
                majorSuggestions.style.display = 'block';
            }
        });
        
        // Filter suggestions as user types
        majorsInput.addEventListener('input', function() {
            const input = this.value.toLowerCase();
            if (input.length > 0) {
                const filtered = commonMajors.filter(m => 
                    m.toLowerCase().includes(input) && !selectedMajors.includes(m)
                );
                
                majorSuggestions.innerHTML = '';
                if (filtered.length > 0) {
                    filtered.forEach(major => {
                        const item = document.createElement('div');
                        item.className = 'suggestion-item';
                        item.textContent = major;
                        item.addEventListener('click', function() {
                            selectedMajors.push(major);
                            updateMajorTags();
                            majorsInput.value = '';
                            majorSuggestions.style.display = 'none';
                        });
                        majorSuggestions.appendChild(item);
                    });
                    majorSuggestions.style.display = 'block';
                } else {
                    majorSuggestions.style.display = 'none';
                }
            } else {
                majorSuggestions.style.display = 'none';
            }
        });
        
        // Add major on Enter
        majorsInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && this.value.trim() !== '') {
                e.preventDefault();
                if (!selectedMajors.includes(this.value.trim())) {
                    selectedMajors.push(this.value.trim());
                    updateMajorTags();
                }
                this.value = '';
                majorSuggestions.style.display = 'none';
            }
        });
        
        // Hide suggestions when clicking outside
        document.addEventListener('click', function(e) {
            if (!majorsInput.contains(e.target) && !majorSuggestions.contains(e.target)) {
                majorSuggestions.style.display = 'none';
            }
        });
        
        // Remove tag when clicking X
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('tag-remove')) {
                const index = parseInt(e.target.getAttribute('data-index'));
                selectedMajors.splice(index, 1);
                updateMajorTags();
            }
        });
        
        // Location tags with suggestions
        const locationsInput = document.getElementById('locations-input');
        const locationsHidden = document.getElementById('locations');
        const locationsContainer = document.getElementById('locations-tags');
        const locationSuggestions = document.getElementById('location-suggestions');
        
        // Popular locations
        const popularLocations = [
            'California', 'New York', 'Massachusetts', 'Texas', 'Florida', 
            'Illinois', 'Pennsylvania', 'North Carolina', 'Michigan', 'Georgia',
            'Boston', 'Los Angeles', 'Chicago', 'New York City', 'San Francisco',
            'Philadelphia', 'Washington DC', 'Atlanta', 'Seattle', 'Austin'
        ];
        
        let selectedLocations = [];
        
        const updateLocationTags = () => {
            locationsContainer.innerHTML = '';
            selectedLocations.forEach((location, index) => {
                const tag = document.createElement('span');
                tag.className = 'tag';
                tag.innerHTML = `${location} <span class="tag-remove" data-index="${index}">×</span>`;
                locationsContainer.appendChild(tag);
            });
            
            // Update hidden input
            locationsHidden.value = selectedLocations.join(',');
        };
        
        // Show suggestions on focus
        locationsInput.addEventListener('focus', function() {
            const availableLocations = popularLocations.filter(l => !selectedLocations.includes(l));
            if (availableLocations.length > 0) {
                locationSuggestions.innerHTML = '';
                availableLocations.forEach(location => {
                    const item = document.createElement('div');
                    item.className = 'suggestion-item';
                    item.textContent = location;
                    item.addEventListener('click', function() {
                        if (!selectedLocations.includes(location)) {
                            selectedLocations.push(location);
                            updateLocationTags();
                            locationsInput.value = '';
                            locationSuggestions.innerHTML = '';
                        }
                    });
                    locationSuggestions.appendChild(item);
                });
                locationSuggestions.style.display = 'block';
            }
        });
        
        // Filter location suggestions
        locationsInput.addEventListener('input', function() {
            const input = this.value.toLowerCase();
            if (input.length > 0) {
                const filtered = popularLocations.filter(l => 
                    l.toLowerCase().includes(input) && !selectedLocations.includes(l)
                );
                
                locationSuggestions.innerHTML = '';
                if (filtered.length > 0) {
                    filtered.forEach(location => {
                        const item = document.createElement('div');
                        item.className = 'suggestion-item';
                        item.textContent = location;
                        item.addEventListener('click', function() {
                            selectedLocations.push(location);
                            updateLocationTags();
                            locationsInput.value = '';
                            locationSuggestions.style.display = 'none';
                        });
                        locationSuggestions.appendChild(item);
                    });
                    locationSuggestions.style.display = 'block';
                } else {
                    locationSuggestions.style.display = 'none';
                }
            } else {
                locationSuggestions.style.display = 'none';
            }
        });
        
        // Add location on Enter
        locationsInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && this.value.trim() !== '') {
                e.preventDefault();
                if (!selectedLocations.includes(this.value.trim())) {
                    selectedLocations.push(this.value.trim());
                    updateLocationTags();
                }
                this.value = '';
                locationSuggestions.style.display = 'none';
            }
        });
        
        // Environment selector
        const environmentOptions = document.querySelectorAll('.environment-option');
        const environmentInput = document.getElementById('environment');
        
        environmentOptions.forEach(option => {
            option.addEventListener('click', function() {
                environmentOptions.forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                environmentInput.value = this.getAttribute('data-value');
            });
        });
        
        // Initialize first section
        showSection(1);
    });
</script>
{% endblock %}

{% block extra_css %}
<style>
    .profile-card {
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        margin-bottom: 2rem;
        position: relative;
    }
    
    .profile-progress-bar {
        height: 5px;
        background-color: #f1f1f1;
        width: 100%;
    }
    
    .progress-indicator {
        height: 100%;
        width: 0%;
        background: linear-gradient(to right, var(--primary-color), var(--accent-color));
        transition: width 0.5s ease;
    }
    
    .form-section {
        padding: 20px;
        transition: all 0.3s ease;
        opacity: 1;
        transform: translateX(0);
    }
    
    .form-section.hidden {
        display: none;
        opacity: 0;
        transform: translateX(20px);
    }
    
    .section-header {
        display: flex;
        align-items: center;
        margin-bottom: 1.5rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid #eee;
    }
    
    .section-icon {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: var(--primary-color);
        color: white;
        border-radius: 50%;
        margin-right: 1rem;
    }
    
    .section-icon i {
        font-size: 1.2rem;
    }
    
    .section-nav {
        display: flex;
        justify-content: space-between;
        margin-top: 2rem;
    }
    
    .gpa-visualization {
        height: 10px;
        background-color: #e6e6e6;
        border-radius: 5px;
        margin-top: 0.5rem;
        overflow: hidden;
    }
    
    .gpa-bar {
        height: 100%;
        width: 0%;
        border-radius: 5px;
        transition: width 0.3s, background-color 0.3s;
    }
    
    .sat-visualization {
        height: 30px;
        background-color: #f5f5f5;
        border-radius: 5px;
        margin-top: 0.5rem;
        position: relative;
    }
    
    .sat-marker {
        width: 15px;
        height: 15px;
        background-color: var(--primary-color);
        border-radius: 50%;
        position: absolute;
        top: 7.5px;
        left: 0;
        transform: translateX(-7.5px);
        transition: left 0.3s, background-color 0.3s;
    }
    
    .sat-scale {
        display: flex;
        justify-content: space-between;
        padding: 0 7.5px;
        margin-top: 5px;
        font-size: 0.75rem;
        color: #666;
    }
    
    .weight-slider {
        margin-bottom: 1.5rem;
    }
    
    .slider-labels {
        display: flex;
        justify-content: space-between;
        font-size: 0.8rem;
        color: #666;
        margin-top: 0.25rem;
    }
    
    .importance-slider {
        width: 100%;
        height: 10px;
        border-radius: 5px;
        outline: none;
        -webkit-appearance: none;
    }
    
    .importance-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: var(--primary-color);
        cursor: pointer;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
    }
    
    .weight-value {
        display: inline-block;
        min-width: 1.5rem;
        text-align: center;
        background: var(--primary-color);
        color: white;
        border-radius: 50%;
        padding: 0.1rem 0.3rem;
        margin-left: 0.5rem;
    }
    
    .form-feedback {
        font-size: 0.85rem;
        margin-top: 0.25rem;
    }
    
    .form-feedback.good {
        color: #2ecc71;
    }
    
    .form-feedback.medium {
        color: #3498db;
    }
    
    .form-feedback.warning {
        color: #e67e22;
    }
    
    .tags-container {
        display: flex;
        flex-wrap: wrap;
        margin-top: 0.5rem;
        gap: 0.5rem;
    }
    
    .tag {
        background-color: #e0e7ff;
        color: #4a5568;
        border-radius: 30px;
        padding: 0.35rem 0.75rem;
        font-size: 0.875rem;
        display: flex;
        align-items: center;
        animation: fadeIn 0.3s;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(5px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    .tag-remove {
        margin-left: 5px;
        cursor: pointer;
        font-weight: bold;
        font-size: 1.2rem;
        line-height: 1;
    }
    
    .budget-indicator {
        height: 10px;
        background-color: #e6e6e6;
        border-radius: 5px;
        margin-top: 0.5rem;
    }
    
    .budget-labels {
        display: flex;
        justify-content: space-between;
        font-size: 0.75rem;
        color: #666;
        margin-top: 0.25rem;
    }
    
    #budget-level {
        height: 100%;
        width: 0%;
        border-radius: 5px;
        transition: width 0.3s, background-color 0.3s;
    }
    
    .input-with-suggestions {
        position: relative;
    }
    
    .suggestions-dropdown {
        position: absolute;
        width: 100%;
        max-height: 200px;
        overflow-y: auto;
        background: white;
        border: 1px solid #ddd;
        border-radius: 5px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        z-index: 10;
        display: none;
    }
    
    .suggestion-item {
        padding: 8px 12px;
        cursor: pointer;
        transition: background 0.2s;
    }
    
    .suggestion-item:hover {
        background-color: #f5f7fa;
    }
    
    .environment-selector {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
        margin-top: 0.5rem;
    }
    
    .environment-option {
        background-color: #f5f7fa;
        border: 2px solid transparent;
        border-radius: 8px;
        padding: 1rem;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
    }
    
    .environment-option:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .environment-option.selected {
        border-color: var(--primary-color);
        background-color: rgba(var(--primary-rgb), 0.1);
    }
    
    .env-icon {
        font-size: 2rem;
        margin-bottom: 0.5rem;
        color: var(--primary-color);
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
        .environment-selector {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %} 